<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery - Bootstrap - Select</title>
    <link href="../vendor/twbs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../vendor/twbs/bootstrap-icons/font/bootstrap-icons.min.css" rel="stylesheet">
    <!--suppress CssUnusedSymbol -->
    <style>
        /*.dropdown-item:active,*/
        /*.dropdown-item.active {*/
        /*    background-color: transparent;*/
        /*    color: white;*/
        /*}*/

        /*.dropdown-item {*/
        /*    font-size: 11px;*/
        /*}*/

        /*.dropdown-item .js-icon-checklist {*/
        /*    font-size: 14px;*/
        /*}*/
    </style>
</head>
<body class="container py-5" style="opacity: 0">
<h1 class="d-flex justify-content-between">
    <i class="bi bi-menu-button me-5 text-info" style="font-size: 2em"></i>
    <span>jQuery - Bootstrap - Select</span>
    <a href="https://github.com/ThomasDev-de/bs-select" class=" ms-auto"><i class="bi bi-github"></i></a>
</h1>
<p>
    This jQuery plugin converts a simple select element into a bootstrap dropdown element.
    It offers many options,
    methods and events for further processing.
    It was developed on the basis of jQuery 3.6, Bootstrap 5.3 and Bootstrap icons.
</p>
<form action="" method="get">
    <div class="d-flex">
        <div class="p-3">
            <table class="table w-100">
                <tr>
                    <td class="w-25">single select</td>
                    <td>

                        <label for="select1" class="d-none"></label>
                        <select id="select1" data-btn-class="btn-primary" name="test1">
                            <option value="1">Item 1</option>
                            <option value="2" selected>Item 2</option>
                            <option value="3">Item 3</option>
                        </select>
                        <!--                        <button type="submit">test submit</button>-->
                    </td>
                </tr>
                <tr>
                    <td>multiple select</td>
                    <td><label for="select2" class="d-none"></label><select multiple id="select2"
                                                                            data-show-selection-as-list="true"></select>
                    </td>
                </tr>
                <tr>
                    <td>multiple select with option groups</td>
                    <td><label for="select3" class="d-none"></label>
                        <select multiple id="select3" data-show-selection-as-list="false"
                                data-drop-direction="dropped"
                                data-btn-class="btn-outline-danger  btn-sm"></select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <small class="text-uppercase mb-3 d-block">playground</small>
                        <div class="d-flex flex-wrap align-items-start">
                            <button id="btnInit" class="btn btn-outline-warning btn-sm me-1 mb-1">init</button>
                            <button id="btnShow" class="btn btn-outline-warning btn-sm me-1 mb-1">show</button>
                            <button id="btnHide" class="btn btn-outline-warning btn-sm me-1 mb-1">hide</button>
                            <button id="btnVal" class="btn btn-outline-warning btn-sm me-1 mb-1">val (2)</button>
                            <button id="btnAll" class="btn btn-outline-warning btn-sm me-1 mb-1">selectAll</button>
                            <button id="btnNone" class="btn btn-outline-warning btn-sm me-1 mb-1">selectNone</button>
                            <button id="selectFirst" class="btn btn-outline-warning btn-sm me-1 mb-1">selectFirst</button>
                            <button id="selectLast" class="btn btn-outline-warning btn-sm me-1 mb-1">selectLast</button>
                            <button id="btnRefresh" class="btn btn-outline-warning btn-sm me-1 mb-1">refresh</button>
                            <button id="btnUpdate" class="btn btn-outline-warning btn-sm me-1 mb-1">update options</button>
                            <button id="setBtnClass" class="btn btn-outline-warning btn-sm me-1 mb-1">setBtnClass btn-primary</button>
                            <button id="toggleDisabled" class="btn btn-outline-warning btn-sm me-1 mb-1">toggleDisabled</button>
<!--                            <button id="setValueDisabled" class="btn btn-outline-warning btn-sm me-1 mb-1">setItemsDisabled [2,3]</button>-->
                            <button id="btnDestroy" class="btn btn-outline-warning btn-sm me-1 mb-1">destroy</button>
                            <button id="btnVisible" class="btn btn-outline-warning btn-sm me-1 mb-1">toggleVisibility</button>


                        </div>
                    </td>
                    <td>
                        <div class="d-flex">
                            <div>
                                <label for="select4" class="d-none"></label>
                                <select
                                        multiple
                                        data-debug="true"
                                        data-debug-element="#debug"
                                        id="select4"
                                        data-show-selection-as-list="false"
                                        data-show-action-menu="false"
                                        data-drop-direction="dropdown-center"
                                        data-btn-split="true"
                                        data-btn-class="btn-info">
                                    <option value="1" data-subtext="Item 1 long description">Item 1 long description</option>
                                    <option value="2">Item 2</option>
                                    <option value="3">Item 3</option>
                                    <option value="4">Item 4</option>
                                    <option value="5">Item 5</option>
                                    <option value="6">Item 6</option>
                                </select>
                            </div>
                            <div class="px-2">
                                <small class="text-uppercase mb-3 d-block">Console of playground</small>
                                <div id="debug" class="font-monospace border d-flex flex-column overflow-auto p-3"
                                     style="max-height: 500px"></div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="flex-fill d-flex flex-column p-3" data-bs-theme="light">

        </div>
    </div>
</form>
<script src="../vendor/components/jquery/jquery.min.js"></script>
<script src="../vendor/twbs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<script src="../dist/locale/de-DE.min.js"></script>
<script src="../dist/jquery.bs-select.min.js"></script>

<script>
    $(document).ready(function () {
        (function ($) {
            $.bsSelect.setDefaults({
                dropUpCenter: true,
                btnClass: 'btn-dark',
                showSubtext: true,
            });
            const select1 = $('#select1');
            const select2 = $('#select2');
            const select3 = $('#select3');
            const select4 = $('#select4');
            const groups = [];
            let options = [];
            for (let i = 1, j = 0; i <= 100; i++) {
                const option = $('<option>', {
                    value: i - 1,
                    text: `Item ${i}`,
                    'data-subtext': 'subtext ' + (i + 1),
                    'data-icon': 'bi bi-heart-fill',
                });
                option.appendTo(select2);
                // option.clone().appendTo(select1);
                options.push(option.clone());
                if (i - 1 !== 0 && ((i - 1) % 10) === 0) {
                    j++;
                    groups.push(options);
                    options = [];
                }
            }
            for (let array in groups) {
                const o = groups[array];
                // noinspection RequiredAttributes
                const g = $('<optgroup>', {
                    label: `Group ${array + 1}`
                }).appendTo(select3);
                o.forEach(op => {
                    op.appendTo(g)
                })
            }

            select1.bsSelect({
                menuInnerClass: 'border border-5 border-warning rounded-5 m-2'
            });
            select1.on('change.bs.select', function () {
                select1.bsSelect('getSelectedText', function (text) {
                    console.log('getSelectedText:', text);
                })
            })

            select2.bsSelect({value: 3});
            select3.bsSelect({
                showMultipleCheckboxes: true
            });
            select4.bsSelect({
                btnClass: 'text-nowrap btn btn-success',
                showMultipleCheckboxes: true,
                debug: true,
                debugElement: '#debug',
                // onBeforeChange: function(){
                //     return confirm('really change?')
                // }
            });

            select4.on('keydown.bs.select', function (e, $select, keyEvent) {
                const target = $(keyEvent.target);
                const isSearchbox = target.is('input[type="search"]');
                // const isDropdownItem = target.hasClass('dropdown-item');
                if (keyEvent.code === 'Enter' && isSearchbox) {
                    keyEvent.preventDefault();
                }
            })

            $('#btnUpdate').on('click', function (e) {
                e.preventDefault();
                const newOptions = {
                    btnClass: 'btn-light',
                    btnSplit: false,
                    search: false,
                    menuClass: 'shadow p-2 mt-0 rounded-0',
                    // onBeforeChange: function(){
                    //     return confirm('really change?')
                    // }
                };
                select4.bsSelect('updateOptions', newOptions)
                select4.bsSelect('getSelectedText', function (text) {
                    console.log(text);
                })
            });
            $('#setValueDisabled').on('click', function (e) {
                e.preventDefault();

                select4.bsSelect('setItemsDisabled', {
                    value: [2, 3],
                    setSelected: false,
                    enableOther: true
                })

            });
            $('#toggleDisabled').on('click', function (e) {
                e.preventDefault();

                select4.bsSelect('toggleDisabled')

            });
            $('#btnVisible').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('toggleVisibility')


            });

            $('#btnInit').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect()
            });
            $('#btnDestroy').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('destroy')
            });

            $('#btnShow').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('show')
            });
            $('#btnHide').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('hide')
            });
            $('#btnRefresh').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('refresh')
            });

            $('#btnVal').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('val', 2)
            });

            $('#btnNone').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('selectNone');
            });
            $('#btnAll').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('selectAll');
            });
            $('#selectLast').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('selectLast');
            });
            $('#selectFirst').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('selectFirst');
            });
            $('#setBtnClass').on('click', function (e) {
                e.preventDefault();
                select4.bsSelect('setBtnClass', 'btn-primary');
            });
            $('body').animate({opacity: 1}, 0);


        }(jQuery));
    });
</script>
</body>
</html>
